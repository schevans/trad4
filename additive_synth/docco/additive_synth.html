<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Copyright (c) Steve Evans 2010 -->
<!-- steve@topaz.myzen.co.uk -->
<!-- This code is licenced under the BSD licence. For details see $APP_ROOT/LICENCE -->
<!--  -->


  <!DOCTYPE html
            PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
            "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

     <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="stylesheet" type="text/css" href="http://trad4.sourceforge.net/gcc.css" />
<title>
additive_synth - a trad4 application
</title>
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#1F00FF" alink="#FF0000" vlink="#9900DD">

<h1 align="center">
additive_synth
</h1>

<table border="1">
<tr>
<td>Application version</td>
<td>

<a href="https://sourceforge.net/projects/trad4/files/trad4v3.1.1/trad4_v3_1_1_beta01.tar.gz/download">beta01</a>

</td>
</tr>
<tr>
<td>Trad4 version</td>
<td>
<a href="https://sourceforge.net/projects/trad4/files/trad4v3.1.1/trad4_v3_1_1_beta01.tar.gz/download">3.1.1</a>
</td>
</tr>
<tr>
<td>Document version</td>
<td>beta01</td>
</tr>
<tr>
<td>Author</td>
<td>schevans</td>
</tr>
<tr>
<td>Date</td>
<td>22-04-2010</td>
</tr>
</table>

<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#the_model">The Model</a></li>
<li><a href="#the_waveforms">The Waveforms</a></li>
<li><a href="#usage">Usage</a></li>
</ul>

<hr />

<h2><a name="introduction">Introduction</a></h2>
<p>
This application is a concurrent additive synthesiser. The principal of additive synthesis is that any periodic waveform can be synthesised by adding together sine waves. There's a good introduction to additive synthesis <a href="http://en.wikibooks.org/wiki/Sound_Synthesis_Theory/Additive_Synthesis#Additive_Synthesis">here</a>.
</p>
<p>
This is a simplified model using no phase shifting and therefore only sinusoidal components. <a href="http://en.wikipedia.org/wiki/Synthesizer#ADSR_envelope">ADSR envelopes</a> are not implemented.
</p>
<p>
In this beta six presets are available: sine, pulse, sawtooth, square, triangle and Hammond.
</p>

<h2><a name="the_model">The Model</a></h2>
<p>
The model itself is made up of three or more tiers. On the first tier are the harmonics - the pure sine wave feedstock of our synthesiser. Next come one or more tiers of mixers, where the harmonics are added concurrently. On the last tier there is only an amplifier, which serves to normalise the output as appropriate.
</p>
<p>
The concurrency comes from the fact that each mixer subscribes to a sub-set of harmonics - in all the configurations presented here there are four harmonics per mixer - and the mixers in turn run concurrently. This model uses the Inheritance of Interface (IoI) feature of trad4 where a mixer can subscribe to four harmonics <i>or</i> four mixers. 
</p>
<h3>The abstract diagram</h3>
<p>
<img src="abstract.png" alt="abstract"/>
</p>
<h3>The concrete diagram</h3>
<p>
<img src="concrete.png" alt="concrete"/>
</p>
<h2><a name="the_waveforms">The Waveforms</a></h2>
<p>
The naming convention for the files below is as follows: name+frequency+num_harmonics. So "square_f1_h1024.wav" is a square wave with frequency 1Hz, synthesised using 1024 harmonics. Likewise "hammond_f261_h16.wav" is the Hammond preset with frequency 262Hz (middle C), synthesised using 16 harmonics. These files are best viewed using a sound editor such as <a href="http://audacity.sourceforge.net/">Audacity</a>. Be aware that only the Hammond wave is at an audible frequency.
</p>
<p>

</p>
<h3>The sine waveform</h3>
<p>

</p>
<a href="sine_f1_h16.wav">sine_f1_h16.wav</a>
<a href="sine_f1_h1024.wav">sine_f1_h1024.wav</a>
<blockquote><pre>
    if ( id == 1 )
        level = 1.0;
    else
	level = 0.0;
</pre></blockquote>
<p>

</p>
<h3>The pulse waveform</h3>
<p>

</p>
<a href="pulse_f1_h16.wav">pulse_f1_h16.wav</a>
<a href="pulse_f1_h1024.wav">pulse_f1_h1024.wav</a>
<blockquote><pre>
    level = 1.0;
</pre></blockquote>
<h3>The sawtooth waveform</h3>
<p>

</p>
<a href="sawtooth_f1_h16.wav">sawtooth_f1_h16.wav</a>
<a href="sawtooth_f1_h1024.wav">sawtooth_f1_h1024.wav</a>
<blockquote><pre>
    level = 1.0 / id;
</pre></blockquote>
<h3>The square waveform</h3>
<p>

</p>
<a href="square_f1_h16.wav">square_f1_h16.wav</a>
<a href="square_f1_h1024.wav">square_f1_h1024.wav</a>
<blockquote><pre>
    if ( id % 2 != 0 )		// Is odd id
	level = 1.0 / id;
    else			// Is even id
	level = 0.0;
</pre></blockquote>
<h3>The triangle waveform</h3>
<p>


</p>
<a href="triangle_f1_h16.wav">triangle_f1_h16.wav</a>
<a href="triangle_f1_h1024.wav">triangle_f1_h1024.wav</a>
<blockquote><pre>
    if ( id % 2 != 0 )		// Is odd id
	level = pow( -1.0, ( id - 1 ) / 2 ) * ( 1.0 / (id*id) );
    else			// Is even id
	level = 0.0;
</pre></blockquote>
<h3>The Hammond preset</h3>
<p>
<a href="http://www.soundonsound.com/sos/nov03/articles/synthsecrets.htm">Details</a>
</p>
<a href="hammond_f261_h16.wav">hammond_f261_h16.wav</a>
<h2><a name="usage">Usage</a></h2>
<h3>Running</h3>
<p>
To run the application:<br/>
1) Download and unpack the distribution<br/>
2) cd into trad4_v3_1_1/additive_synth:<br/>
</p>
<blockquote><pre>$ cd trad4_v3_1_1/additive_synth</pre></blockquote>
3) Source additive_synth.conf:<br/>
<blockquote><pre>additive_synth$ . ./additive_synth.conf</pre></blockquote>
4) Start additive_synth:<br/>
<blockquote><pre>additive_synth$ additive_synth</pre></blockquote>
<p>
To increase or decrease the number of threads used (the default is 4), set NUM_THREADS and re-start the application:
</p>
<blockquote><pre>$ export NUM_THREADS=64
$ additive_synth</pre></blockquote>
<h3>Updating</h3>
<p>
To update a running system, log into the database:
</p>
<blockquote><pre>$ t4db
SQL></pre></blockquote>
<p>
And make any required updates. Then instruct the running application to collect these changes by using send_reload.sh:
</p>
<blockquote><pre>$ send_reload.sh</pre></blockquote>

</body>
</html>
