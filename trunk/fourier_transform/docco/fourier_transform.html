<?xml version="1.0" encoding="ISO-8859-1"?>

  <!DOCTYPE html
            PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
            "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

     <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="stylesheet" type="text/css" href="http://trad4.sourceforge.net/gcc.css" />
<title>
fourier_transform - a trad4 application
</title>
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#1F00FF" alink="#FF0000" vlink="#9900DD">

<h1 align="center">
fourier_transform
</h1>

<table border="1">
<tr>
<td>Application version</td>
<td>

<a href="https://sourceforge.net/projects/trad4/files/trad4v3.1.3/trad4_v3_1_3.tar.gz/download">beta01</a>

</td>
</tr>
<tr>
<td>Trad4 version</td>
<td>
<a href="https://sourceforge.net/projects/trad4/files/trad4v3.1.3/trad4_v3_1_3.tar.gz/download">3.1.3</a>
</td>
</tr>
<tr>
<td>Document version</td>
<td>beta01</td>
</tr>
<tr>
<td>Author</td>
<td>schevans</td>
</tr>
<tr>
<td>Date</td>
<td>04-06-2010</td>
</tr>
</table>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#the_model">The Model</a></li>
<li><a href="#example_sine">Example: Sine wave</a></li>
<li><a href="#example_square">Example: Square wave</a></li>
<li><a href="#example_triangle">Example: Triangle wave</a></li>
<li><a href="#example_clarinet">Example: Clarinet</a></li>
<li><a href="#usage">Usage</a></li>
</ul>

<hr />

<h1><a name="introduction">Introduction</a></h1>
<p>
This is a concurrent model of the discrete Fourier transform. This allows us to decompose a particular sample into it's component frequencies. It's the inverse of additive_synth, and their iteration is shown below.
</p>
<p>
The principal of the discrete Fourier transform is that, given the base frequency of the sample, we calculate the amplitude of each harmonic using a process called correlation, in a way that allows us to reconstruct the sample using additive synthesis.
</p>
<p>
The way each harmonic is tested for correlation is that a pure sine wave of the frequency of that harmonic is multiplied by the sample we're analysing. This is not particularly intuitive so for further reading please see Steven W. Smith's excellent DSP book, available <a href="http://www.dspguide.com/">for free online</a> and in all good bookshops. Correlation is described <a href="http://www.dspguide.com/ch7/3.htm">here</a>, but you should probably also read the whole of <a href="http://www.dspguide.com/ch8.htm">chapter 8</a>.
</p>
<h2><a name="the_model">The Model</a></h2>
<p>

</p>
<h3>The abstract diagram</h3>
<p>
<img src="abstract.png" alt="abstract"/>
</p>
<p>

</p>
<h3>The concrete diagram</h3>
<p>
<img src="concrete.png" alt="concrete"/>
</p>
<p>

</p>
<h2><a name="example_sine">Example: Sine wave</a></h2>
<p>
When a sine wave such as sine_f1_h16.wav from additive_synth is run through the transform, we see that is is composed of a singe wave of the fundamental frequency as expected:

</p>
<h3>The frequency domain</h3>
<p>
<img src="sine_out.png" alt="sine_out"/>
</p>

<h2><a name="example_square">Example: Square wave</a></h2>
<p>

</p>
<h3>The frequency domain</h3>
<p>
<img src="square_out.png" alt="square_out"/>
</p>

<h2><a name="example_triangle">Example: Triangle wave</a></h2>
<p>

</p>
<h3>The frequency domain</h3>
<p>
<img src="triangle_out.png" alt="triangle_out"/>
</p>


<h2><a name="example_clarinet">Example: Clarinet</a></h2>
<p>

</p>
<h3>The original sample</h3>
<p>
<img src="Clarinet_orig.png" alt="Clarinet_orig"/>
</p>
<p>

</p>
<h3>The frequency domain</h3>
<p>
<img src="Clarinet_out.png" alt="Clarinet_out"/>
</p>
<p>

</p>
<h3>The synthetic sample</h3>
<p>
<img src="Clarinet_synth.png" alt="Clarinet_synth"/>
</p>
<p>

</p>
<h2><a name="usage">Usage</a></h2>
<h3>Running</h3>
<p>
To run the application:<br/>
1) Download and unpack the distribution<br/>
2) cd into trad4_v3_1_2/fourier_transform:<br/>
</p>
<blockquote><pre>$ cd trad4_v3_1_2/fourier_transform</pre></blockquote>
3) Source fourier_transform.conf:<br/>
<blockquote><pre>fourier_transform$ . ./fourier_transform.conf</pre></blockquote>
4) Start fourier_transform:<br/>
<blockquote><pre>fourier_transform$ fourier_transform</pre></blockquote>
<p>
To increase or decrease the number of threads used (the default is 4), set NUM_THREADS and re-start the application:
</p>
<blockquote><pre>$ export NUM_THREADS=64
$ fourier_transform</pre></blockquote>
<h3>Loading different waveforms</h3>
<p>
To load a different waveform use the load_waveform command, with the two arguments being the waveform.wav file and the fundamental frequency of the sample you want analysed, which you must know in advance. E.g:
</p>
<blockquote><pre>
fourier_transform$ load_waveform.pl input/sine_f1_h16.wav 1.0
</pre></blockquote>
<p>
Or (where 261.626Hz equals middle C):
</p>
<blockquote><pre>
fourier_transform$ load_waveform.pl input/hammond_888000000.wav 261.626 
</pre></blockquote>
<p>
This can be done while fourier_transform is running.
</p>
</body>
</html>
