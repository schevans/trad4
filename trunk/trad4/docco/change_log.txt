Change log
----------

The main change in 3.1 is that the database layout has been simplified, so that what used to look like:
insert into my_table values ( id, 0, "H" );
insert into my_table values ( id, 1, "e" );
insert into my_table values ( id, 2, "l" );
insert into my_table values ( id, 3, "l" );
...
Becomes:
insert into my_table values ( id, "H", "e", "l", "l" "o" );
This breaks the t4v3.0 DB data layout but any upgrade will be a simplification.

Alongside this change, the default_set of date generated by the precompiler has been fixed to work with nested structures and arrays. You will find it a lot easier to set up and run complex trad4 applications.

Also, validation and reporting have been improved, plus some bugs and display issues have been fixed.

Details below:

2010-02-14 17:31  schevans

        * trad4/PreComp/Structures.pm: Fixed ancient bug where using enums
          in structures would fail.

2010-02-13 13:43  schevans

        * trad4/PreComp/Macros.pm: Fixed display issue in macros - now
          correctly displays 'id' as the return type of sub objects.

2010-02-12 22:33  schevans

        * trad4/docco/index.html: Relabelled Analysis: bond_risk as beta.

2010-02-12 22:23  schevans

        * trad4/docco/: gcc.css, index.html: Added index.html to t4 repo.

2010-02-12 19:57  schevans

        * trad4/PreComp/: Sql.pm, Utilities.pm: Fixed the default data set
          gen to match 3.1 db layout, and in the process gained a massive
          jump in usability. The gen default_set was always flaky for
          nested structs to the point where even I struggled to set up a
          new app with these. These changes may need bedding in, but I plan
          to revisit all existing apps and testing their default_set, so it
          should be golden come 3.1.0.

2010-02-12 19:02  schevans

        * trad4/PreComp/Sql.pm: Fixed gen default_set for objects where
          tier=0 (can exist at any tier).

2010-02-10 21:15  schevans

        * trad4/PreComp/Sql.pm: Fixed default_set data generation to match
          v3.1 app db layout changes. Untested across all configurations at
          this stage, but this is a higher priority for the v3.1.0 release
          than the planned changes to vision_thing.

2010-02-10 19:38  schevans

        * trad4/objects/trad4.c: Improved reporting.

2010-02-10 19:33  schevans

        * trad4/objects/trad4.c: Improved validation.

2010-01-27 20:45  schevans

        * trad4/PreComp/: Aliases.pm, AppConstants.pm, Enums.pm, Header.pm,
          Macros.pm, Structures.pm: Extended header guard macro uniqueness.
          Not had a problem but they look a bit flimsy.

2010-01-22 21:34  schevans

        * trad4/bin/create_new_app.sh: Set NUM_THREADS=0 in
          create_new_app.sh. You don't want multi-threading in a dev
          environment and 0 threads (where the master thread runs the
          objects rather than using the thread pool) is faster than
          NUM_THREADS=1.

2010-01-12 21:43  schevans

        * trad4/: PreComp/Header.pm, bin/precomp.pl: Retired the mysterious
          common.h, surprisingly no relation to common.c. Untested under
          create_new_app.sh.

2010-01-12 20:37  schevans

        * trad4/PreComp/Macros.pm: Removed indents and added blank lines in
          macros for clarification.

2010-01-11 21:13  schevans

        * trad4/PreComp/Macros.pm: Clarified macro comments with indents.

2010-01-11 21:08  schevans

        * trad4/objects/trad4.c: Whitespace & debug.

2009-12-29 17:51  schevans

        * trad4/trad4.conf: Incremented version number.

2009-12-05 15:14  schevans

        * trad4/objects/trad4.c: Fixed display issue on startup.

2009-11-29 12:14  schevans

        * trad4/: PreComp/Wrapper.pm, objects/trad4.c: GCC 4.4.1 changes.

2009-11-25 20:04  schevans

        * trad4/PreComp/Utilities.pm: Fixed false error thrown by
          whitespace in structures.t4s.

2009-11-25 19:21  schevans

        * trad4/PreComp/Utilities.pm: Missed checkin - should have gone in
          with Macros.pm r1.42: Fixed display issue in macro comments for
          multi-structs.

2009-11-24 20:24  schevans

        * trad4/PreComp/Macros.pm: Fixed display issue in macro comments
          for multi-structs.

2009-11-22 15:14  schevans

        * trad4/PreComp/: Sql.pm, Wrapper.pm: Radically enhanced app_db
          usability: Leaf array tables are no longer fully normalised. This
          breaks the t4v3.0 DB data layout but any upgrade will be a
          simplification. See accompanying changes in
          test_app/data/worked_example.

2009-11-21 16:26  schevans

        * trad4/PreComp/Utilities.pm: Validation and reporting of
          structures.

2009-11-21 15:21  schevans

        * trad4/PreComp/Utilities.pm: Yet more improved constant validation
          and reporting.

2009-11-12 21:16  schevans

        * trad4/objects/trad4.c: Improved dev debug.

2009-11-12 21:13  schevans

        * trad4/: bin/precomp.pl, PreComp/Structures.pm: Improved constant
          validation and reporting for structures.

2009-11-07 12:04  schevans

        * trad4/bin/precomp.pl: Fixed bug in new apps where adding
          structures would fail in certain circumstances.

2009-11-07 11:30  schevans

        * trad4/PreComp/Wrapper.pm: Fixed garbled error message x2.

2009-11-07 11:26  schevans

        * trad4/PreComp/Wrapper.pm: Fixed garbled error message.

2009-11-07 11:05  schevans

        * trad4/bin/reload_db.sh: Enhanced to allow `reload_db.sh .`

2009-11-07 11:04  schevans

        * trad4/bin/create_new_app.sh: Set BATCH_MODE=1 in new_app.conf.

2009-10-17 11:22  schevans

        * trad4/PreComp/: Macros.pm, Utilities.pm: Fixed display issue in
          macro comments for arrays.

2009-10-17 10:46  schevans

        * trad4/PreComp/Utilities.pm: Improved constant validation and
          reporting.

2009-10-17 10:06  schevans

        * trad4/PreComp/Wrapper.pm: Fixed bug in states - I have a feeling
          this will be a popular checkin message. Also removed dead code.

2009-10-16 19:14  schevans

        * trad4/bin/create_new_app.sh: Added TIMING_DEBUG=1 as default in
          new_app.conf.

2009-10-14 20:09  schevans

        * trad4/objects/trad4.c: Removed ancient debug.

2009-10-13 21:41  schevans

        * trad4/PreComp/: Sql.pm, Wrapper.pm: Fixed segfault caused by sub
          arrays and the default_set of data.

2009-10-07 19:42  schevans

        * trad4/PreComp/Utilities.pm: Fixed bug in validation that detects
          an empty object_types.t4s file.

2009-10-07 18:54  schevans

        * trad4/PreComp/Utilities.pm: Added validation to catch missing
          constants.t4s file.

